<div class="content">
  <h2 class="title is-3">
  <% if @category_id.present? && @query.present? && @query.downcase != Category.find(@category_id).name.downcase %>
    Search Results for "<%= @query %>" in "<%= Category.find(@category_id).name %>"
  <% elsif @category_id.present? %>
    Showing products in "<%= Category.find(@category_id).name %>"
  <% elsif @query.present? %>
    Search Results for "<%= @query %>"
  <% else %>
    All Products
  <% end %>
</h2>


  <% if @products.any? %>
    <div class="box">
      <h3 class="title is-4">Products</h3>
      <ul>
        <% @products.each do |product| %>
          <li>
            <%= link_to product.name, product_path(product), class: "has-text-link" %>
            - <strong><%= number_to_currency(product.price) %></strong>
          </li>
        <% end %>
      </ul>
    </div>
  <% else %>
    <div class="notification is-warning">
      No results found.
    </div>
  <% end %>

  <% if @categories.any? %>
    <div class="box">
      <h3 class="title is-4">Categories</h3>
      <ul>
        <% @categories.each do |category| %>
          <li>
            <%= link_to category.name, category_path(category), class: "has-text-link" %>
          </li>
        <% end %>
      </ul>
    </div>
  <% else %>
    <div class="notification is-warning">
      No results found.
    </div>
  <% end %>

</div>
